/**
 * HTML 5 media compatibility layer.
 * 
 * Allows the use of video tags within all browsers to play videos encoded in
 * the MPEG-4 and h.264 formats.
 * 
 * Developed by Dave Hall <david@etianen.com>
 * 
 * <http://www.etianen.com/>
 */


(function(d){function j(a,b,e,g,c,m,n){e&&d("img",a).length==0&&a.html(d("<img>",{src:e,width:a.width(),height:a.height()}));var k=null;if(g)k={fullscreen:false,autoHide:"always"};b=[{url:b,autoPlay:c,autoBuffering:m,onBeforeFinish:function(){return!n}}];e&&b.splice(0,0,{url:e});a.flowplayer(o,{onBeforeUnload:function(){return false},play:null,playlist:b,plugins:{controls:k}}).flowplayer(0).load()}function f(a,b){a=a.attr(b);return a==true||typeof a=="string"}var l=document.createElement("video"),
h=Boolean(l.canPlayType&&l.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),i="";d("script").each(function(){var a=d(this).attr("src");if(a.substr(-20)=="jquery.html5media.js"||a.substr(-24)=="jquery.html5media.min.js")i=a.split("/").slice(0,-1).join("/")+"/"});var o=i+"flowplayer.swf";if(!h&&!d.fn.flowplayer){document.write('<script src="'+i+'flowplayer.js"><\/script>');d(function(){d("video").each(function(){if(!h){var a=d(this),b=d("<div/>",{width:a.attr("width"),height:a.attr("height"),
"class":a.attr("class"),id:a.attr("id"),title:a.attr("title")});a.replaceWith(b);j(b,a.attr("src"),a.attr("poster"),f(a,"controls"),f(a,"autoplay"),f(a,"autobuffer"),f(a,"loop"))}})})}d.fn.video=function(a){this.each(function(){var b=d(this),e=b.attr("class"),g=b.attr("id"),c={src:b.attr("href"),poster:d("img",b).attr("src")||"",controls:false,autoplay:false,autobuffer:false,loop:false,width:b.width(),height:b.height()};a&&d.extend(c,a);if(h){e=d("<video/>",{id:g,"class":e,src:c.src,poster:c.poster}).attr("width",
c.width).attr("height",c.height);c.controls&&e.attr("controls","controls");c.autoplay&&e.attr("autoplay","autoplay");c.autobuffer&&e.attr("autobuffer","autobuffer");c.loop&&e.attr("loop","loop");b.html(e)}else j(b,c.src,c.poster,c.controls,c.autoplay,c.autobuffer,c.loop)})}})(jQuery);